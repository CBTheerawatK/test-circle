machine:
  node:
    version: 6.5.0
  post:
    - npm install -g npm@3.x.x

test:
  pre:
    - rm -rf dist tmp
  override:
    - npm run build-heroku

deployment:
  production:
    branch: circleci
    commands:
      - rm -rf published
      - mv dist published
      - ls -la
      - git remote add heroku git@heroku.com:test-heroku-1213.git
      - git config user.email "tesserax@cubiccreative.org"
      - git config user.name "Tesserax"
      - git add -A
      - git status
      - git commit -m "heroku deployment"
      - git push -f heroku $CIRCLE_SHA1:refs/heads/master
